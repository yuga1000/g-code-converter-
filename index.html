<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Basic G-code Cleaner</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:20px;max-width:700px}
#drop{border:2px dashed #666;padding:20px;cursor:pointer;text-align:center;margin-bottom:20px}
#drop.hover{background:#f0f0f0}
#output{width:100%;height:300px;margin-top:20px}
#download{margin-top:10px}
</style>
</head>
<body>
<h1>Basic G-code Cleaner</h1>
<p>This simple tool replaces <code>S1000</code> with <code>Z-1</code> and <code>S0</code> with <code>Z1</code>. It does not validate G-code or insert tool commands.</p>
<div id="drop">Drop .gcode or .nc file here or click to choose<input type="file" id="file" accept=".gcode,.nc" style="display:none"></div>
<textarea id="output" placeholder="Converted code will appear here"></textarea><br>
<button id="download" disabled>Download</button>
<script>
const drop=document.getElementById('drop');
const fileInput=document.getElementById('file');
const output=document.getElementById('output');
const download=document.getElementById('download');
let currentName="output.nc";
function prevent(e){e.preventDefault();e.stopPropagation();}
function handle(f){const file=f[0];if(!file)return;currentName=file.name.replace(/\.[^.]*$/,'')+'_cleaned.nc';const r=new FileReader();
 r.onload=()=>{let t=r.result;t=t.replace(/\bS1000\b/g,'Z-1').replace(/\bS0\b/g,'Z1');output.value=t;const blob=new Blob([t],{type:'text/plain'});download.href=URL.createObjectURL(blob);download.download=currentName;download.disabled=false;};
 r.readAsText(file);}
drop.addEventListener('click',()=>fileInput.click());
fileInput.addEventListener('change',()=>handle(fileInput.files));
['dragenter','dragover'].forEach(e=>drop.addEventListener(e,ev=>{prevent(ev);drop.classList.add('hover');}));
['dragleave','drop'].forEach(e=>drop.addEventListener(e,ev=>{prevent(ev);drop.classList.remove('hover');}));
drop.addEventListener('drop',e=>handle(e.dataTransfer.files));
</script>
</body>
</html>
